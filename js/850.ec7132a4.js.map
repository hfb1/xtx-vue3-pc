{"version":3,"file":"js/850.ec7132a4.js","mappings":"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","sources":["webpack://eribbit-client-pc/./src/views/login/index.vue","webpack://eribbit-client-pc/./src/views/login/components/login-form.vue","webpack://eribbit-client-pc/./src/views/login/components/login-form.vue?c986","webpack://eribbit-client-pc/./src/views/login/index.vue?b794"],"sourcesContent":["<template>\r\n  <LoginHeader>欢迎登录</LoginHeader>\r\n  <section class=\"login-section\">\r\n    <div class=\"wrapper\">\r\n      <nav>\r\n        <a\r\n          :class=\"{ active: activeName === 'account' }\"\r\n          @click=\"activeName = 'account'\"\r\n          href=\"javascript:;\"\r\n          >账户登录</a\r\n        >\r\n        <a\r\n          :class=\"{ active: activeName === 'qrcode' }\"\r\n          @click=\"activeName = 'qrcode'\"\r\n          href=\"javascript:;\"\r\n          >扫码登录</a\r\n        >\r\n      </nav>\r\n      <!-- 账号登录&扫码登录 -->\r\n      <!-- 表单 -->\r\n      <LoginForm v-if=\"activeName === 'account'\"></LoginForm>\r\n      <!-- 二维码 -->\r\n      <div v-if=\"activeName === 'qrcode'\" class=\"qrcode-box\">\r\n        <img src=\"@/assets/images/qrcode.jpg\" alt=\"\" />\r\n        <p>打开 <a href=\"javascript:;\">小兔鲜App</a> 扫码登录</p>\r\n      </div>\r\n    </div>\r\n  </section>\r\n  <LoginFooter />\r\n</template>\r\n\r\n<script>\r\nimport LoginForm from './components/login-form'\r\nimport LoginHeader from './components/login-header'\r\nimport LoginFooter from './components/login-footer'\r\nimport { ref } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRoute } from 'vue-router'\r\nexport default {\r\n  name: 'Login',\r\n  components: {\r\n    LoginHeader,\r\n    LoginFooter,\r\n    LoginForm\r\n  },\r\n  setup () {\r\n    const activeName = ref('account')\r\n    // 存储回跳地址\r\n    const store = useStore()\r\n    const route = useRoute()\r\n    store.commit('user/setRedirectUrl', route.query.redirectUrl)\r\n    return {\r\n      activeName\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n.login-section {\r\n  background: url(../../assets/images/login-bg.png) no-repeat center / cover;\r\n  height: 488px;\r\n  position: relative;\r\n  .wrapper {\r\n    width: 380px;\r\n    background: #fff;\r\n    min-height: 400px;\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 54px;\r\n    transform: translate3d(100px, 0, 0);\r\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);\r\n    nav {\r\n      height: 55px;\r\n      border-bottom: 1px solid #f5f5f5;\r\n      display: flex;\r\n      padding: 0 40px;\r\n      text-align: right;\r\n      align-items: center;\r\n      a {\r\n        flex: 1;\r\n        line-height: 1;\r\n        display: inline-block;\r\n        font-size: 18px;\r\n        position: relative;\r\n        &:first-child {\r\n          border-right: 1px solid #f5f5f5;\r\n          text-align: left;\r\n        }\r\n        &.active {\r\n          color: @xtxColor;\r\n          font-weight: bold;\r\n        }\r\n      }\r\n    }\r\n    // 二维码容器\r\n    .qrcode-box {\r\n      text-align: center;\r\n      padding-top: 40px;\r\n      p {\r\n        margin-top: 20px;\r\n        a {\r\n          color: @xtxColor;\r\n          font-size: 16px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"account-box\">\r\n    <div class=\"toggle\">\r\n      <a @click=\"isMsgLogin = false\" href=\"javascript:;\" v-if=\"isMsgLogin\">\r\n        <i class=\"iconfont icon-user\"></i> 使用账号登录\r\n      </a>\r\n      <a @click=\"isMsgLogin = true\" href=\"javascript:;\" v-else>\r\n        <i class=\"iconfont icon-msg\"></i> 使用短信登录\r\n      </a>\r\n    </div>\r\n    <!-- 原生的dom 元素提供 autocomplete=\"off\"  去除浏览器自动填充的功能 -->\r\n    <Form\r\n      ref=\"formCom\"\r\n      class=\"form\"\r\n      :validation-schema=\"mySchema\"\r\n      v-slot=\"{ errors }\"\r\n      autocomplete=\"off\"\r\n    >\r\n      <template v-if=\"!isMsgLogin\">\r\n        <div class=\"form-item\">\r\n          <div class=\"input\">\r\n            <i class=\"iconfont icon-user\"></i>\r\n            <Field\r\n              :class=\"{ error: errors.account }\"\r\n              v-model=\"form.account\"\r\n              name=\"account\"\r\n              type=\"text\"\r\n              placeholder=\"请输入用户名或手机号\"\r\n            />\r\n          </div>\r\n          <div class=\"error\" v-if=\"errors.account\">\r\n            <i class=\"iconfont icon-warning\" />{{ errors.account }}\r\n          </div>\r\n        </div>\r\n        <div class=\"form-item\">\r\n          <div class=\"input\">\r\n            <i class=\"iconfont icon-lock\"></i>\r\n            <Field\r\n              v-model=\"form.password\"\r\n              name=\"password\"\r\n              type=\"password\"\r\n              placeholder=\"请输入密码\"\r\n            />\r\n          </div>\r\n          <div class=\"error\" v-if=\"errors.password\">\r\n            <i class=\"iconfont icon-warning\" />{{ errors.password }}\r\n          </div>\r\n        </div>\r\n      </template>\r\n      <template v-else>\r\n        <div class=\"form-item\">\r\n          <div class=\"input\">\r\n            <i class=\"iconfont icon-user\"></i>\r\n            <Field\r\n              v-model=\"form.mobile\"\r\n              name=\"mobile\"\r\n              type=\"text\"\r\n              placeholder=\"请输入手机号\"\r\n            />\r\n          </div>\r\n          <div class=\"error\" v-if=\"errors.mobile\">\r\n            <i class=\"iconfont icon-warning\" />{{ errors.mobile }}\r\n          </div>\r\n        </div>\r\n        <div class=\"form-item\">\r\n          <div class=\"input\">\r\n            <i class=\"iconfont icon-code\"></i>\r\n            <Field\r\n              v-model=\"form.code\"\r\n              name=\"code\"\r\n              type=\"password\"\r\n              placeholder=\"请输入验证码\"\r\n            />\r\n            <span @click=\"send()\" class=\"code\">{{\r\n              time === 0 ? \"发送验证码\" : `${time}秒后发送`\r\n            }}</span>\r\n          </div>\r\n          <div class=\"error\" v-if=\"errors.code\">\r\n            <i class=\"iconfont icon-warning\" />{{ errors.code }}\r\n          </div>\r\n        </div>\r\n      </template>\r\n      <div class=\"form-item\">\r\n        <div class=\"agree\">\r\n          <Field as=\"XtxCheckbox\" name=\"isAgree\" v-model=\"form.isAgree\" />\r\n          <span>我已同意</span>\r\n          <a href=\"javascript:;\">《隐私条款》</a>\r\n          <span>和</span>\r\n          <a href=\"javascript:;\">《服务条款》</a>\r\n        </div>\r\n        <div class=\"error\" v-if=\"errors.isAgree\">\r\n          <i class=\"iconfont icon-warning\" />{{ errors.isAgree }}\r\n        </div>\r\n      </div>\r\n      <a href=\"javascript:;\" @click=\"login()\" class=\"btn\">登录</a>\r\n    </Form>\r\n    <div class=\"action\">\r\n      <!-- <span id=\"qqLoginBtn\"></span> -->\r\n      <a\r\n        href=\"https://graph.qq.com/oauth2.0/authorize?client_id=100556005&response_type=token&scope=all&redirect_uri=http%3A%2F%2Fwww.corho.com%3A8080%2F%23%2Flogin%2Fcallback\"\r\n      >\r\n        <img\r\n          src=\"https://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/Connect_logo_7.png\"\r\n          alt=\"\"\r\n        />\r\n      </a>\r\n\r\n      <div class=\"url\">\r\n        <a href=\"javascript:;\">忘记密码</a>\r\n        <a href=\"javascript:;\">免费注册</a>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n// userMobileLogin\r\n// import QC from 'qc'\r\nimport { useIntervalFn } from '@vueuse/core'\r\nimport { userAccountLogin, userMobileLoginMsg, userMobileLogin } from '@/api/user'\r\nimport Message from '@/components/library/Message'\r\nimport veeSchema from '@/utils/vee-validate-schema'\r\nimport { Form, Field } from 'vee-validate'\r\nimport { onUnmounted, reactive, onMounted, ref, watch } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRouter } from 'vue-router'\r\nexport default {\r\n  name: 'LoginForm',\r\n  components: {\r\n    Form, Field\r\n  },\r\n  setup () {\r\n    // 是否短信登录\r\n    const isMsgLogin = ref(false)\r\n    // 表单信息对象\r\n    const form = reactive({\r\n      isAgree: false,\r\n      account: 'namei123',\r\n      password: 123123,\r\n      mobile: 19994570511,\r\n      code: 123456\r\n    })\r\n    // vee-validate 效验基本步骤\r\n    // 1.导入Form Field组件，将form和input进行替换，需要加上name，name是用来指定将来的效验规则函数的\r\n    // 2.Field需要进行数据绑定,字段名称最好和后台接口需要的一致\r\n    // 3.编写name属性的对应的效验规则函数，是一个对象\r\n    // 4.自定义组需要效验必须支持v-model，然后Field使用as指定组件名称\r\n    const mySchema = {\r\n      // 校验函数规则:返回true就是效验成功，返回一个字符串就是失败，字符串就是错误提示信息\r\n      account: veeSchema.account,\r\n      password: veeSchema.password,\r\n      mobile: veeSchema.mobile,\r\n      code: veeSchema.code,\r\n      isAgree: veeSchema.isAgree\r\n    }\r\n    const formCom = ref(null)\r\n    // 监听isMsgLogin来重置表单数据（数据+清除效验结果）\r\n    watch(isMsgLogin, () => {\r\n      // 重置数据\r\n      form.isAgree = false\r\n      form.account = 'namei123'\r\n      form.password = 123123\r\n      form.mobile = 19994570511\r\n      form.code = 123456\r\n      // 如果是没有销毁Field组件，之前的效验结果是不会销毁的     例如：v-show切换时会出现这种情况\r\n      // 补充效验效果清除，Form组件提供resetForm()函数清除效验结果\r\n      formCom.value.resetForm()\r\n    })\r\n    // setup中获取组件实例  proxy\r\n    // app 当前应用实例 proxy 当前组件实例\r\n    // const { proxy } = getCurrentInstance()\r\n    const store = useStore()\r\n    const router = useRouter()\r\n    // 需要在点击登录的时候进行整体表单的效验\r\n    const login = async () => {\r\n      const valid = await formCom.value.validate()\r\n      if (valid) {\r\n        try {\r\n          let data = null\r\n          if (isMsgLogin.value) {\r\n            const { mobile, code } = form\r\n            data = await userMobileLogin({ mobile, code })\r\n          } else {\r\n            const { account, password } = form\r\n            data = await userAccountLogin({ account, password })\r\n          }\r\n          const { id, account, avatar, mobile, nickName, token } = data.result\r\n          store.commit('user/setUser', { id, account, avatar, mobile, nickName, token })\r\n          store.dispatch('cart/mergeCart').then(() => {\r\n            // 进行路由跳转\r\n            // console.log('登录路由信息：', route.query)\r\n            router.push(store.state.user.redirecturl || '/')\r\n            // 信息提示\r\n            Message({ type: 'success', text: '登录成功' })\r\n          })\r\n        } catch (e) {\r\n          if (e.response.data) {\r\n            Message({ type: 'error', text: e.response.data.message || '登录失败' })\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // 定时器 返回值：pause暂停  resume开启\r\n    // useIntervalFn(回调函数，执行间隔，是否立即开启)\r\n    const time = ref(0)\r\n    const { pause, resume } = useIntervalFn(() => {\r\n      time.value--\r\n      if (time.value <= 0) {\r\n        pause()\r\n      }\r\n    }, 1000, { immediate: false })\r\n\r\n    onUnmounted(() => {\r\n      pause()\r\n    })\r\n\r\n    // 发送短信方法\r\n    const send = async () => {\r\n      const valid = mySchema.mobile(form.mobile)\r\n      if (valid === true) {\r\n        // 通过\r\n        // 没有倒计时才可以发送\r\n        if (time.value === 0) {\r\n          await userMobileLoginMsg(form.mobile)\r\n          Message({ type: 'success', text: '短信验证码发送成功' })\r\n          time.value = 60\r\n          resume()\r\n        }\r\n      } else {\r\n        // 没通过，使用vee错误函数显示错误信息\r\n        // 使用setFieldError(字段名称，错误信息)\r\n        formCom.value.setFieldError('mobile', valid)\r\n      }\r\n    }\r\n    // 初始化qq登录按钮\r\n    // 1.准备span的id\r\n    // 目的：为了拿到跳转地址\r\n    onMounted(() => {\r\n      //   // 组件渲染完毕，使用QC生成QQ登录按钮\r\n      //   QC.Login({\r\n      //     btnId: 'qqLoginBtn'\r\n      //   })\r\n    })\r\n    return { isMsgLogin, form, mySchema, formCom, login, send, time }\r\n  }\r\n  // created () {\r\n  //   this.$message({ text: '测试警告' })\r\n  // }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n// 账号容器\r\n.account-box {\r\n  .toggle {\r\n    padding: 15px 40px;\r\n    text-align: right;\r\n    a {\r\n      color: @xtxColor;\r\n      i {\r\n        font-size: 14px;\r\n      }\r\n    }\r\n  }\r\n  .form {\r\n    padding: 0 40px;\r\n    &-item {\r\n      margin-bottom: 28px;\r\n      .input {\r\n        position: relative;\r\n        height: 36px;\r\n        > i {\r\n          width: 34px;\r\n          height: 34px;\r\n          background: #cfcdcd;\r\n          color: #fff;\r\n          position: absolute;\r\n          left: 1px;\r\n          top: 1px;\r\n          text-align: center;\r\n          line-height: 34px;\r\n          font-size: 18px;\r\n        }\r\n        input {\r\n          padding-left: 44px;\r\n          border: 1px solid #cfcdcd;\r\n          height: 36px;\r\n          line-height: 36px;\r\n          width: 100%;\r\n          &.error {\r\n            border-color: @priceColor;\r\n          }\r\n          &.active,\r\n          &:focus {\r\n            border-color: @xtxColor;\r\n          }\r\n        }\r\n        .code {\r\n          position: absolute;\r\n          right: 1px;\r\n          top: 1px;\r\n          text-align: center;\r\n          line-height: 34px;\r\n          font-size: 14px;\r\n          background: #f5f5f5;\r\n          color: #666;\r\n          width: 90px;\r\n          height: 34px;\r\n          cursor: pointer;\r\n        }\r\n      }\r\n      > .error {\r\n        position: absolute;\r\n        font-size: 12px;\r\n        line-height: 28px;\r\n        color: @priceColor;\r\n        i {\r\n          font-size: 14px;\r\n          margin-right: 2px;\r\n        }\r\n      }\r\n    }\r\n    .agree {\r\n      a {\r\n        color: #069;\r\n      }\r\n    }\r\n    .btn {\r\n      display: block;\r\n      width: 100%;\r\n      height: 40px;\r\n      color: #fff;\r\n      text-align: center;\r\n      line-height: 40px;\r\n      background: @xtxColor;\r\n      &.disabled {\r\n        background: #cfcdcd;\r\n      }\r\n    }\r\n  }\r\n  .action {\r\n    padding: 20px 40px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    .url {\r\n      a {\r\n        color: #999;\r\n        margin-left: 10px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./login-form.vue?vue&type=template&id=e953db68&scoped=true\"\nimport script from \"./login-form.vue?vue&type=script&lang=js\"\nexport * from \"./login-form.vue?vue&type=script&lang=js\"\n\nimport \"./login-form.vue?vue&type=style&index=0&id=e953db68&lang=less&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\eribbit-client-pc\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e953db68\"]])\n\nexport default __exports__","import { render } from \"./index.vue?vue&type=template&id=f2d203d2&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=f2d203d2&scoped=true&lang=less\"\n\nimport exportComponent from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\eribbit-client-pc\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f2d203d2\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","src","_imports_0","alt","href","_hoisted_4","_hoisted_5","_createVNode","_component_LoginHeader","_hoisted_1","_hoisted_2","active","$setup","onClick","_createBlock","_component_LoginForm","key","_createElementBlock","_hoisted_3","_component_LoginFooter","_component_Form","ref","autocomplete","errors","_Fragment","_hoisted_15","_hoisted_16","_hoisted_17","_component_Field","mobile","name","type","placeholder","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","code","_hoisted_23","_hoisted_24","_hoisted_6","_hoisted_7","error","account","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","password","_hoisted_13","_hoisted_14","_hoisted_25","_hoisted_26","as","isAgree","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","components","Form","Field","setup","isMsgLogin","form","reactive","mySchema","veeSchema","formCom","watch","value","resetForm","store","useStore","router","useRouter","login","async","valid","validate","data","userMobileLogin","userAccountLogin","id","avatar","nickName","token","result","commit","dispatch","then","push","state","user","redirecturl","Message","text","e","response","message","time","pause","resume","useIntervalFn","immediate","onUnmounted","send","userMobileLoginMsg","setFieldError","onMounted","__exports__","LoginHeader","LoginFooter","LoginForm","activeName","route","useRoute","query","redirectUrl","render"],"sourceRoot":""}