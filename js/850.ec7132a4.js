"use strict";(self["webpackChunkeribbit_client_pc"]=self["webpackChunkeribbit_client_pc"]||[]).push([[850],{6051:function(e,a,o){o.r(a),o.d(a,{default:function(){return me}});var s=o(3396),c=o(7139),i=o(3947);const n=e=>((0,s.dD)("data-v-f2d203d2"),e=e(),(0,s.Cn)(),e),l={class:"login-section"},t={class:"wrapper"},r={key:1,class:"qrcode-box"},d=n((()=>(0,s._)("img",{src:i,alt:""},null,-1))),m=n((()=>(0,s._)("p",null,[(0,s.Uk)("打开 "),(0,s._)("a",{href:"javascript:;"},"小兔鲜App"),(0,s.Uk)(" 扫码登录")],-1))),u=[d,m];function p(e,a,o,i,n,d){const m=(0,s.up)("LoginHeader"),p=(0,s.up)("LoginForm"),v=(0,s.up)("LoginFooter");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Uk)("欢迎登录")])),_:1}),(0,s._)("section",l,[(0,s._)("div",t,[(0,s._)("nav",null,[(0,s._)("a",{class:(0,c.C_)({active:"account"===i.activeName}),onClick:a[0]||(a[0]=e=>i.activeName="account"),href:"javascript:;"},"账户登录",2),(0,s._)("a",{class:(0,c.C_)({active:"qrcode"===i.activeName}),onClick:a[1]||(a[1]=e=>i.activeName="qrcode"),href:"javascript:;"},"扫码登录",2)]),"account"===i.activeName?((0,s.wg)(),(0,s.j4)(p,{key:0})):(0,s.kq)("",!0),"qrcode"===i.activeName?((0,s.wg)(),(0,s.iD)("div",r,u)):(0,s.kq)("",!0)])]),(0,s.Wm)(v)],64)}const v=e=>((0,s.dD)("data-v-e953db68"),e=e(),(0,s.Cn)(),e),g={class:"account-box"},f={class:"toggle"},_=v((()=>(0,s._)("i",{class:"iconfont icon-user"},null,-1))),w=v((()=>(0,s._)("i",{class:"iconfont icon-msg"},null,-1))),k={class:"form-item"},b={class:"input"},h=v((()=>(0,s._)("i",{class:"iconfont icon-user"},null,-1))),y={key:0,class:"error"},q=v((()=>(0,s._)("i",{class:"iconfont icon-warning"},null,-1))),C={class:"form-item"},U={class:"input"},F=v((()=>(0,s._)("i",{class:"iconfont icon-lock"},null,-1))),V={key:0,class:"error"},j=v((()=>(0,s._)("i",{class:"iconfont icon-warning"},null,-1))),A={class:"form-item"},D={class:"input"},L=v((()=>(0,s._)("i",{class:"iconfont icon-user"},null,-1))),Z={key:0,class:"error"},x=v((()=>(0,s._)("i",{class:"iconfont icon-warning"},null,-1))),N={class:"form-item"},z={class:"input"},H=v((()=>(0,s._)("i",{class:"iconfont icon-code"},null,-1))),W={key:0,class:"error"},M=v((()=>(0,s._)("i",{class:"iconfont icon-warning"},null,-1))),E={class:"form-item"},Y={class:"agree"},R=v((()=>(0,s._)("span",null,"我已同意",-1))),I=v((()=>(0,s._)("a",{href:"javascript:;"},"《隐私条款》",-1))),S=v((()=>(0,s._)("span",null,"和",-1))),P=v((()=>(0,s._)("a",{href:"javascript:;"},"《服务条款》",-1))),X={key:0,class:"error"},$=v((()=>(0,s._)("i",{class:"iconfont icon-warning"},null,-1))),B=(0,s.uE)('<div class="action" data-v-e953db68><a href="https://graph.qq.com/oauth2.0/authorize?client_id=100556005&amp;response_type=token&amp;scope=all&amp;redirect_uri=http%3A%2F%2Fwww.corho.com%3A8080%2F%23%2Flogin%2Fcallback" data-v-e953db68><img src="https://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/Connect_logo_7.png" alt="" data-v-e953db68></a><div class="url" data-v-e953db68><a href="javascript:;" data-v-e953db68>忘记密码</a><a href="javascript:;" data-v-e953db68>免费注册</a></div></div>',1);function G(e,a,o,i,n,l){const t=(0,s.up)("Field"),r=(0,s.up)("Form");return(0,s.wg)(),(0,s.iD)("div",g,[(0,s._)("div",f,[i.isMsgLogin?((0,s.wg)(),(0,s.iD)("a",{key:0,onClick:a[0]||(a[0]=e=>i.isMsgLogin=!1),href:"javascript:;"},[_,(0,s.Uk)(" 使用账号登录 ")])):((0,s.wg)(),(0,s.iD)("a",{key:1,onClick:a[1]||(a[1]=e=>i.isMsgLogin=!0),href:"javascript:;"},[w,(0,s.Uk)(" 使用短信登录 ")]))]),(0,s.Wm)(r,{ref:"formCom",class:"form","validation-schema":i.mySchema,autocomplete:"off"},{default:(0,s.w5)((({errors:e})=>[i.isMsgLogin?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s._)("div",A,[(0,s._)("div",D,[L,(0,s.Wm)(t,{modelValue:i.form.mobile,"onUpdate:modelValue":a[4]||(a[4]=e=>i.form.mobile=e),name:"mobile",type:"text",placeholder:"请输入手机号"},null,8,["modelValue"])]),e.mobile?((0,s.wg)(),(0,s.iD)("div",Z,[x,(0,s.Uk)((0,c.zw)(e.mobile),1)])):(0,s.kq)("",!0)]),(0,s._)("div",N,[(0,s._)("div",z,[H,(0,s.Wm)(t,{modelValue:i.form.code,"onUpdate:modelValue":a[5]||(a[5]=e=>i.form.code=e),name:"code",type:"password",placeholder:"请输入验证码"},null,8,["modelValue"]),(0,s._)("span",{onClick:a[6]||(a[6]=e=>i.send()),class:"code"},(0,c.zw)(0===i.time?"发送验证码":`${i.time}秒后发送`),1)]),e.code?((0,s.wg)(),(0,s.iD)("div",W,[M,(0,s.Uk)((0,c.zw)(e.code),1)])):(0,s.kq)("",!0)])],64)):((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("div",k,[(0,s._)("div",b,[h,(0,s.Wm)(t,{class:(0,c.C_)({error:e.account}),modelValue:i.form.account,"onUpdate:modelValue":a[2]||(a[2]=e=>i.form.account=e),name:"account",type:"text",placeholder:"请输入用户名或手机号"},null,8,["class","modelValue"])]),e.account?((0,s.wg)(),(0,s.iD)("div",y,[q,(0,s.Uk)((0,c.zw)(e.account),1)])):(0,s.kq)("",!0)]),(0,s._)("div",C,[(0,s._)("div",U,[F,(0,s.Wm)(t,{modelValue:i.form.password,"onUpdate:modelValue":a[3]||(a[3]=e=>i.form.password=e),name:"password",type:"password",placeholder:"请输入密码"},null,8,["modelValue"])]),e.password?((0,s.wg)(),(0,s.iD)("div",V,[j,(0,s.Uk)((0,c.zw)(e.password),1)])):(0,s.kq)("",!0)])],64)),(0,s._)("div",E,[(0,s._)("div",Y,[(0,s.Wm)(t,{as:"XtxCheckbox",name:"isAgree",modelValue:i.form.isAgree,"onUpdate:modelValue":a[7]||(a[7]=e=>i.form.isAgree=e)},null,8,["modelValue"]),R,I,S,P]),e.isAgree?((0,s.wg)(),(0,s.iD)("div",X,[$,(0,s.Uk)((0,c.zw)(e.isAgree),1)])):(0,s.kq)("",!0)]),(0,s._)("a",{href:"javascript:;",onClick:a[8]||(a[8]=e=>i.login()),class:"btn"},"登录")])),_:1},8,["validation-schema"]),B])}o(7658);var J=o(4419),K=o(2900),O=o(8391),Q=o(2025),T=o(5708),ee=o(4870),ae=o(65),oe=o(2483),se={name:"LoginForm",components:{Form:T.l0,Field:T.gN},setup(){const e=(0,ee.iH)(!1),a=(0,ee.qj)({isAgree:!1,account:"namei123",password:123123,mobile:19994570511,code:123456}),o={account:Q.Z.account,password:Q.Z.password,mobile:Q.Z.mobile,code:Q.Z.code,isAgree:Q.Z.isAgree},c=(0,ee.iH)(null);(0,s.YP)(e,(()=>{a.isAgree=!1,a.account="namei123",a.password=123123,a.mobile=19994570511,a.code=123456,c.value.resetForm()}));const i=(0,ae.oR)(),n=(0,oe.tv)(),l=async()=>{const o=await c.value.validate();if(o)try{let o=null;if(e.value){const{mobile:e,code:s}=a;o=await(0,K.EE)({mobile:e,code:s})}else{const{account:e,password:s}=a;o=await(0,K.Ak)({account:e,password:s})}const{id:s,account:c,avatar:l,mobile:t,nickName:r,token:d}=o.result;i.commit("user/setUser",{id:s,account:c,avatar:l,mobile:t,nickName:r,token:d}),i.dispatch("cart/mergeCart").then((()=>{n.push(i.state.user.redirecturl||"/"),(0,O.Z)({type:"success",text:"登录成功"})}))}catch(s){s.response.data&&(0,O.Z)({type:"error",text:s.response.data.message||"登录失败"})}},t=(0,ee.iH)(0),{pause:r,resume:d}=(0,J.Zv)((()=>{t.value--,t.value<=0&&r()}),1e3,{immediate:!1});(0,s.Ah)((()=>{r()}));const m=async()=>{const e=o.mobile(a.mobile);!0===e?0===t.value&&(await(0,K.MM)(a.mobile),(0,O.Z)({type:"success",text:"短信验证码发送成功"}),t.value=60,d()):c.value.setFieldError("mobile",e)};return(0,s.bv)((()=>{})),{isMsgLogin:e,form:a,mySchema:o,formCom:c,login:l,send:m,time:t}}},ce=o(89);const ie=(0,ce.Z)(se,[["render",G],["__scopeId","data-v-e953db68"]]);var ne=ie,le=o(7442),te=o(8388),re={name:"Login",components:{LoginHeader:le.Z,LoginFooter:te.Z,LoginForm:ne},setup(){const e=(0,ee.iH)("account"),a=(0,ae.oR)(),o=(0,oe.yj)();return a.commit("user/setRedirectUrl",o.query.redirectUrl),{activeName:e}}};const de=(0,ce.Z)(re,[["render",p],["__scopeId","data-v-f2d203d2"]]);var me=de},3947:function(e,a,o){e.exports=o.p+"img/qrcode.f8ff6896.jpg"}}]);
//# sourceMappingURL=850.ec7132a4.js.map