"use strict";(self["webpackChunkeribbit_client_pc"]=self["webpackChunkeribbit_client_pc"]||[]).push([[194],{1787:function(t,e,s){s.d(e,{IA:function(){return n},ZI:function(){return l},lK:function(){return c},s6:function(){return r},t5:function(){return o}});var a=s(4471);const n=t=>(0,a.Z)("/goods","get",{id:t}),l=(t,e=16)=>(0,a.Z)("/goods/relevant","get",{id:t,limit:e}),c=({id:t,type:e,limit:s=3})=>(0,a.Z)("/goods/hot","get",{id:t,type:e,limit:s}),o=t=>(0,a.Z)(`https://mock.boxuegu.com/mock/1175/goods/${t}/evaluate`,"get"),r=(t,e)=>(0,a.Z)(`https://mock.boxuegu.com/mock/1175/goods/${t}/evaluate/page`,"get",e)},3170:function(t,e,s){s.r(e),s.d(e,{default:function(){return yt}});var a=s(3396),n=s(7139);const l=t=>((0,a.dD)("data-v-c581dda2"),t=t(),(0,a.Cn)(),t),c={class:"xtx-cart-page"},o={class:"container"},r={class:"cart"},u={width:"120"},d=l((()=>(0,a._)("th",{width:"400"},"商品信息",-1))),i=l((()=>(0,a._)("th",{width:"220"},"单价",-1))),p=l((()=>(0,a._)("th",{width:"180"},"数量",-1))),g=l((()=>(0,a._)("th",{width:"180"},"小计",-1))),h=l((()=>(0,a._)("th",{width:"140"},"操作",-1))),k={key:0},_={colspan:"6"},v={class:"goods"},m=["src"],f={class:"name ellipsis"},w={class:"tc"},C={key:0},b={class:"red"},I={class:"tc"},y={class:"tc"},x={class:"f16 red"},D={class:"tc"},Z=l((()=>(0,a._)("p",null,[(0,a._)("a",{href:"javascript:;"},"移入收藏夹")],-1))),S=["onClick"],z=l((()=>(0,a._)("p",null,[(0,a._)("a",{href:"javascript:;"},"找相似")],-1))),$={key:0},W=l((()=>(0,a._)("tr",null,[(0,a._)("td",{colspan:"6"},[(0,a._)("h3",{class:"tit"},"失效商品")])],-1))),j={class:"goods"},H=["src"],V={class:"name ellipsis"},P={class:"attr"},T={class:"tc"},U={class:"tc"},X={class:"tc"},A=l((()=>(0,a._)("td",{class:"tc"},[(0,a._)("p",null,[(0,a._)("a",{class:"green",href:"javascript:;"},"删除")]),(0,a._)("p",null,[(0,a._)("a",{href:"javascript:;"},"找相似")])],-1))),E={class:"action"},N={class:"batch"},G=l((()=>(0,a._)("a",{href:"javascript:;"},"移入收藏夹",-1))),L={class:"total"},q={class:"red"};function B(t,e,s,l,B,K){const R=(0,a.up)("XtxBreadItem"),Y=(0,a.up)("XtxBread"),M=(0,a.up)("XtxCheckbox"),O=(0,a.up)("CartNone"),F=(0,a.up)("RouterLink"),J=(0,a.up)("CartSku"),Q=(0,a.up)("XtxNumbox"),tt=(0,a.up)("XtxButton"),et=(0,a.up)("GoodRelevant");return(0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("div",o,[(0,a.Wm)(Y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(R,{to:"/"},{default:(0,a.w5)((()=>[(0,a.Uk)("首页")])),_:1}),(0,a.Wm)(R,null,{default:(0,a.w5)((()=>[(0,a.Uk)("购物车")])),_:1})])),_:1}),(0,a._)("div",r,[(0,a._)("table",null,[(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",u,[(0,a.Wm)(M,{onChange:l.checkAll,modelValue:t.$store.getters["cart/isCheckAll"]},{default:(0,a.w5)((()=>[(0,a.Uk)("全选")])),_:1},8,["onChange","modelValue"])]),d,i,p,g,h])]),(0,a._)("tbody",null,[0===t.$store.getters["cart/validList"].length?((0,a.wg)(),(0,a.iD)("tr",k,[(0,a._)("td",_,[(0,a.Wm)(O)])])):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.$store.getters["cart/validList"],(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.skuId},[(0,a._)("td",null,[(0,a.Wm)(M,{modelValue:t.selected,onChange:e=>l.checkOne(t.skuId,e)},null,8,["modelValue","onChange"])]),(0,a._)("td",null,[(0,a._)("div",v,[(0,a.Wm)(F,{to:`/product/${t.id}`},{default:(0,a.w5)((()=>[(0,a._)("img",{src:t.picture,alt:""},null,8,m)])),_:2},1032,["to"]),(0,a._)("div",null,[(0,a._)("p",f,(0,n.zw)(t.name),1),(0,a.Wm)(J,{onChange:e=>l.updateCartSku(t.skuId,e),attrsText:t.attrsText,skuId:t.skuId},null,8,["onChange","attrsText","skuId"])])])]),(0,a._)("td",w,[(0,a._)("p",null,"¥"+(0,n.zw)(t.nowPrice),1),t.price-t.nowPrice>0?((0,a.wg)(),(0,a.iD)("p",C,[(0,a.Uk)(" 比加入时降价 "),(0,a._)("span",b,"¥"+(0,n.zw)(t.price-t.nowPrice),1)])):(0,a.kq)("",!0)]),(0,a._)("td",I,[(0,a.Wm)(Q,{max:t.stock,onChange:e=>l.updateCount(t.skuId,e),modelValue:t.count},null,8,["max","onChange","modelValue"])]),(0,a._)("td",y,[(0,a._)("p",x," ¥"+(0,n.zw)(Math.round(100*t.nowPrice)*t.count/100),1)]),(0,a._)("td",D,[Z,(0,a._)("p",null,[(0,a._)("a",{onClick:e=>l.deleteCart(t.skuId),class:"green",href:"javascript:;"},"删除",8,S)]),z])])))),128))]),t.$store.getters["cart/inValidList"].length?((0,a.wg)(),(0,a.iD)("tbody",$,[W,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.$store.getters["cart/inValidList"],(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.skuId},[(0,a._)("td",null,[(0,a.Wm)(M,{style:{color:"#eee"}})]),(0,a._)("td",null,[(0,a._)("div",j,[(0,a.Wm)(F,{to:"/"},{default:(0,a.w5)((()=>[(0,a._)("img",{src:t.picture,alt:""},null,8,H)])),_:2},1024),(0,a._)("div",null,[(0,a._)("p",V,(0,n.zw)(t.name),1),(0,a._)("p",P,(0,n.zw)(t.attrsText),1)])])]),(0,a._)("td",T,[(0,a._)("p",null,"¥"+(0,n.zw)(t.nowPrice),1)]),(0,a._)("td",U,(0,n.zw)(t.count),1),(0,a._)("td",X,[(0,a._)("p",null," ¥"+(0,n.zw)(Math.round(100*t.nowPrice)*t.count/100),1)]),A])))),128))])):(0,a.kq)("",!0)])]),(0,a._)("div",E,[(0,a._)("div",N,[(0,a.Wm)(M,{onChange:l.checkAll,modelValue:t.$store.getters["cart/isCheckAll"]},{default:(0,a.w5)((()=>[(0,a.Uk)("全选")])),_:1},8,["onChange","modelValue"]),(0,a._)("a",{href:"javascript:;",onClick:e[0]||(e[0]=t=>l.batchDeleteCart())},"删除商品"),G,(0,a._)("a",{href:"javascript:;",onClick:e[1]||(e[1]=t=>l.batchDeleteCart(!0))},"清空失效商品")]),(0,a._)("div",L,[(0,a.Uk)(" 共 "+(0,n.zw)(t.$store.getters["cart/validTotal"])+" 件商品，已选择 "+(0,n.zw)(t.$store.getters["cart/selectedTotal"])+"件，商品合计： ",1),(0,a._)("span",q,"¥"+(0,n.zw)(t.$store.getters["cart/selectedAmount"]),1),(0,a.Wm)(tt,{type:"primary",onClick:e[2]||(e[2]=t=>l.checkout())},{default:(0,a.w5)((()=>[(0,a.Uk)("下单结算")])),_:1})])]),(0,a.Wm)(et)])])}s(7658);var K=s.p+"img/none.243beb2a.png";const R=t=>((0,a.dD)("data-v-2a071270"),t=t(),(0,a.Cn)(),t),Y={class:"cart-none"},M=R((()=>(0,a._)("img",{src:K,alt:""},null,-1))),O=R((()=>(0,a._)("p",null,"购物车内暂时没有商品",-1))),F={class:"btn"};function J(t,e,s,n,l,c){const o=(0,a.up)("XtxButton");return(0,a.wg)(),(0,a.iD)("div",Y,[M,O,(0,a._)("div",F,[(0,a.Wm)(o,{type:"primary",onClick:e[0]||(e[0]=e=>t.$router.push("/"))},{default:(0,a.w5)((()=>[(0,a.Uk)("继续逛逛")])),_:1})])])}var Q={name:"CartNone"},tt=s(89);const et=(0,tt.Z)(Q,[["render",J],["__scopeId","data-v-2a071270"]]);var st=et;const at=t=>((0,a.dD)("data-v-57b266e0"),t=t(),(0,a.Cn)(),t),nt={class:"cart-sku",ref:"target"},lt={class:"ellipsis"},ct=at((()=>(0,a._)("i",{class:"iconfont icon-angle-down"},null,-1))),ot={key:0,class:"layer"},rt={key:0,class:"loading"};function ut(t,e,s,l,c,o){const r=(0,a.up)("GoodsSku"),u=(0,a.up)("XtxButton");return(0,a.wg)(),(0,a.iD)("div",nt,[(0,a._)("div",{class:"attrs",onClick:e[0]||(e[0]=t=>l.toggle())},[(0,a._)("span",lt,(0,n.zw)(s.attrsText),1),ct]),l.visible?((0,a.wg)(),(0,a.iD)("div",ot,[l.loading?((0,a.wg)(),(0,a.iD)("div",rt)):((0,a.wg)(),(0,a.j4)(r,{key:1,onChange:l.changeSku,skuId:s.skuId,goods:l.goods},null,8,["onChange","skuId","goods"])),l.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(u,{key:2,onClick:l.submit,type:"primary",size:"mini",style:{"margin-left":"60px"}},{default:(0,a.w5)((()=>[(0,a.Uk)(" 确认 ")])),_:1},8,["onClick"]))])):(0,a.kq)("",!0)],512)}var dt=s(4870),it=s(6367),pt=s(6624),gt=s(6901),ht={name:"CartSku",components:{GoodsSku:gt.Z},props:{attrsText:{type:String,default:""},skuId:{type:String,default:""}},setup(t,{emit:e}){const s=(0,dt.iH)(!1),a=(0,dt.iH)(null),n=(0,dt.iH)(!1),l=()=>{s.value=!0,n.value=!0,(0,pt.aE)(t.skuId).then((t=>{a.value=t.result,n.value=!1}))},c=()=>{s.value=!1},o=()=>{s.value?c():l()},r=(0,dt.iH)(null);(0,it.i9H)(r,(()=>{c()}));const u=(0,dt.iH)(null),d=t=>{u.value=t},i=()=>{u.value&&u.value.skuId&&u.value.skuId!==t.skuId&&(e("change",u.value),c())};return{visible:s,toggle:o,target:r,goods:a,loading:n,changeSku:d,submit:i}}};const kt=(0,tt.Z)(ht,[["render",ut],["__scopeId","data-v-57b266e0"]]);var _t=kt,vt=s(4840),mt=s(65),ft=s(8391),wt=s(8362),Ct=s(2483),bt={name:"XtxCartPage",components:{GoodRelevant:vt.Z,CartNone:st,CartSku:_t},setup(){const t=(0,mt.oR)(),e=(e,s)=>{t.dispatch("cart/updateCart",{skuId:e,selected:s})},s=e=>{t.dispatch("cart/checkAllCart",e)},a=e=>{(0,wt.Z)({text:"亲，您是否确认删除该商品？"}).then((()=>{t.dispatch("cart/deleteCart",e).then((()=>{(0,ft.Z)({type:"success",text:"删除成功"})}))})).catch((t=>{}))},n=e=>{(0,wt.Z)({text:`亲，您是否确认删除${e?"失效的":"选中的"}商品？`}).then((()=>{t.dispatch("cart/batchDeleteCart",e).then((()=>{}))})).catch((t=>{}))},l=(e,s)=>{t.dispatch("cart/updateCart",{skuId:e,count:s})},c=(e,s)=>{t.dispatch("cart/updateCartSku",{oldSkuId:e,newSku:s})},o=(0,Ct.tv)(),r=()=>{if(0===t.getters["cart/selectedList"].length)return(0,ft.Z)({text:"至少选中一件商品"});t.state.user.profile.token?(0,wt.Z)({text:"是否确定下单？"}).then((()=>{o.push("/member/checkout")})).catch((t=>{})):(0,wt.Z)({text:"下单结算需要登录，确认现在去登录吗？"}).then((()=>{o.push("/member/checkout")})).catch((t=>{}))};return{checkOne:e,checkAll:s,deleteCart:a,batchDeleteCart:n,updateCount:l,updateCartSku:c,checkout:r}}};const It=(0,tt.Z)(bt,[["render",B],["__scopeId","data-v-c581dda2"]]);var yt=It},4840:function(t,e,s){s.d(e,{Z:function(){return _}});var a=s(3396),n=s(7139);const l=t=>((0,a.dD)("data-v-627fc13b"),t=t(),(0,a.Cn)(),t),c={class:"goods-relevant"},o={class:"header"},r=l((()=>(0,a._)("i",{class:"icon"},null,-1))),u={class:"title"};function d(t,e,s,l,d,i){const p=(0,a.up)("XtxCarousel");return(0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("div",o,[r,(0,a._)("span",u,(0,n.zw)(s.goodsId?"同类商品推荐":"猜你喜欢"),1)]),(0,a.Wm)(p,{sliders:l.sliders},null,8,["sliders"])])}s(7658);var i=s(1787),p=s(4870),g={name:"GoodsRelevant",props:{goodsId:{type:String,default:""}},setup(t){const e=(0,p.iH)([]);return(0,i.ZI)(t.goodsId).then((t=>{const s=4,a=Math.ceil(t.result.length/s);for(let n=0;n<a;n++)e.value.push(t.result.slice(s*n,s*(n+1)))})),{sliders:e}}},h=s(89);const k=(0,h.Z)(g,[["render",d],["__scopeId","data-v-627fc13b"]]);var _=k},6901:function(t,e,s){s.d(e,{Z:function(){return m}});var a=s(3396),n=s(7139);const l={class:"goods-sku"},c=["onClick","src"],o=["onClick"];function r(t,e,s,r,u,d){return(0,a.wg)(),(0,a.iD)("div",l,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.goods.specs,(t=>((0,a.wg)(),(0,a.iD)("dl",{key:t.id},[(0,a._)("dt",null,(0,n.zw)(t.name),1),(0,a._)("dd",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.values,(e=>((0,a.wg)(),(0,a.iD)(a.HY,{key:e.name},[e.picture?((0,a.wg)(),(0,a.iD)("img",{key:0,class:(0,n.C_)([{active:e.selected,disabled:e.disabled},"selected"]),onClick:s=>r.changeSku(t,e),src:e.picture,alt:""},null,10,c)):((0,a.wg)(),(0,a.iD)("span",{key:1,class:(0,n.C_)({active:e.selected,disabled:e.disabled}),onClick:s=>r.changeSku(t,e)},(0,n.zw)(e.name),11,o))],64)))),128))])])))),128))])}s(7658);function u(t){const e=[],s=2**t.length;for(let a=0;a<s;a+=1){const s=[];for(let e=0;e<t.length;e+=1)a&1<<e&&s.push(t[e]);e.push(s)}return e}const d="★",i=t=>{const e={};return t.forEach((t=>{if(t.inventory>0){const s=t.specs.map((t=>t.valueName)),a=u(s);a.forEach((s=>{const a=s.join(d);e[a]?e[a].push(t.id):e[a]=[t.id]}))}})),e},p=t=>{const e=[];return t.forEach((t=>{const s=t.values.find((t=>t.selected));e.push(s?s.name:void 0)})),e},g=(t,e)=>{t.forEach(((s,a)=>{const n=p(t);s.values.forEach((t=>{if(t.selected)return;n[a]=t.name;const s=n.filter((t=>t)).join(d);t.disabled=!e[s]}))}))},h=(t,e)=>{const s=t.skus.find((t=>t.id===e));t.specs.forEach(((t,e)=>{const a=t.values.find((t=>t.name===s.specs[e].valueName));a.selected=!0}))};var k={name:"GoodsSku",props:{goods:{type:Object,default:()=>({})},skuId:{type:String,default:""}},setup(t,{emit:e}){const s=i(t.goods.skus);t.skuId&&h(t.goods,t.skuId),g(t.goods.specs,s);const a=(a,n)=>{if(n.disabled)return;n.selected?n.selected=!1:(a.values.forEach((t=>{t.selected=!1})),n.selected=!0),g(t.goods.specs,s);const l=p(t.goods.specs).filter((t=>t));if(l.length===t.goods.specs.length){const a=s[l.join(d)],n=t.goods.skus.find((t=>t.id===a[0]));e("change",{skuId:n.id,price:n.price,oldPrice:n.oldPrice,inventory:n.inventory,specsText:n.specs.reduce(((t,e)=>`${t} ${e.name}:${e.valueName}`),"").trim()})}else e("change",{})};return{changeSku:a}}},_=s(89);const v=(0,_.Z)(k,[["render",r],["__scopeId","data-v-7b3080da"]]);var m=v}}]);
//# sourceMappingURL=194.25fb015f.js.map