{"version":3,"file":"js/135.c9d224ef.js","mappings":"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","sources":["webpack://eribbit-client-pc/./src/views/category/components/goods-item.vue","webpack://eribbit-client-pc/./src/views/category/components/goods-item.vue?729e","webpack://eribbit-client-pc/./src/views/category/sub.vue","webpack://eribbit-client-pc/./src/views/category/components/sub-filter.vue","webpack://eribbit-client-pc/./src/views/category/components/sub-filter.vue?8f5b","webpack://eribbit-client-pc/./src/views/category/components/sub-bread.vue","webpack://eribbit-client-pc/./src/views/category/components/sub-bread.vue?6f1c","webpack://eribbit-client-pc/./src/views/category/components/sub-sort.vue","webpack://eribbit-client-pc/./src/views/category/components/sub-sort.vue?1654","webpack://eribbit-client-pc/./src/views/category/sub.vue?7bf5"],"sourcesContent":["<template>\r\n  <RouterLink :to=\"`/product/${goods.id}`\" class=\"goods-item\">\r\n    <img :src=\"goods.picture\" alt=\"\" />\r\n    <p class=\"name ellipsis\">{{ goods.name }}</p>\r\n    <p class=\"desc ellipsis\">{{ goods.desc }}</p>\r\n    <p class=\"price\">&yen;{{ goods.price }}</p>\r\n  </RouterLink>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'GoodsItem',\r\n  props: {\r\n    goods: {\r\n      type: Object,\r\n      default: () => ({})\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n.goods-item {\r\n  display: block;\r\n  width: 220px;\r\n  padding: 20px 30px;\r\n  text-align: center;\r\n  .hoverShadow();\r\n  img {\r\n    width: 160px;\r\n    height: 160px;\r\n  }\r\n  p {\r\n    padding-top: 10px;\r\n  }\r\n  .name {\r\n    font-size: 16px;\r\n  }\r\n  .desc {\r\n    color: #999;\r\n    height: 29px;\r\n  }\r\n  .price {\r\n    color: @priceColor;\r\n    font-size: 20px;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./goods-item.vue?vue&type=template&id=7411d050&scoped=true\"\nimport script from \"./goods-item.vue?vue&type=script&lang=js\"\nexport * from \"./goods-item.vue?vue&type=script&lang=js\"\n\nimport \"./goods-item.vue?vue&type=style&index=0&id=7411d050&scoped=true&lang=less\"\n\nimport exportComponent from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\eribbit-client-pc\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7411d050\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"sub-category\">\r\n    <div class=\"container\">\r\n      <!-- 面包屑 -->\r\n      <SubBread />\r\n      <!-- 筛选区 -->\r\n      <SubFilter @filter-change=\"fliterChange\" />\r\n      <!-- 商品面板 （排序+列表）-->\r\n      <div class=\"goods-list\">\r\n        <!-- 排序 -->\r\n        <SubSort @sort-change=\"sortChange\" />\r\n        <!-- 列表 -->\r\n        <ul>\r\n          <li v-for=\"goods in goodsList\" :key=\"goods.id\">\r\n            <GoodsItem :goods=\"goods\" />\r\n          </li>\r\n        </ul>\r\n        <!-- 无限加载组件 -->\r\n        <XtxInfiniteLoading\r\n          :loading=\"loading\"\r\n          :finished=\"finished\"\r\n          @infinite=\"getDate\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, watch } from 'vue'\r\nimport SubFilter from './components/sub-filter.vue'\r\nimport SubBread from './components/sub-bread.vue'\r\nimport SubSort from './components/sub-sort.vue'\r\nimport GoodsItem from './components/goods-item.vue'\r\nimport { findSubCategoryGoods } from '@/api/category'\r\nimport { useRoute } from 'vue-router'\r\nexport default {\r\n  name: 'SubCategory',\r\n  components: { SubBread, SubFilter, SubSort, GoodsItem },\r\n  setup () {\r\n    const route = useRoute()\r\n    // 加载中\r\n    const loading = ref(false)\r\n    // 加载完毕\r\n    const finished = ref(false)\r\n    // 获取商品列表数据\r\n    const goodsList = ref([])\r\n    // 请求参数\r\n    let reqParams = {\r\n      page: 1,\r\n      pageSize: 20\r\n    }\r\n    const getDate = () => {\r\n      loading.value = true\r\n      // 设置二级分类的id\r\n      reqParams.categoryId = route.params.id\r\n      findSubCategoryGoods(reqParams).then(({ result }) => {\r\n        // 获取数据成功\r\n        if (result.items.length) {\r\n          goodsList.value.push(...result.items)\r\n          // 把page改成下一页页码\r\n          reqParams.page++\r\n        } else {\r\n          // 没有数据就代表加载完成\r\n          finished.value = true\r\n        }\r\n        loading.value = false\r\n      })\r\n    }\r\n    // 在更改二级分类的时候需要重新加载\r\n    watch(() => route.params.id, (newValue) => {\r\n      if (newValue && `/category/sub/${newValue}` === route.path) {\r\n        finished.value = false\r\n        goodsList.value = []// 导致列表为空，加载更多组件顶上来，进入可视区，加载数据\r\n        reqParams = {\r\n          page: 1,\r\n          pageSize: 20\r\n        }\r\n      }\r\n    })\r\n    // 1.更改 排序组件 的筛选数据，重新请求\r\n    const sortChange = (sortParams) => {\r\n      finished.value = false\r\n      // 合并请求参数，保留之前参数\r\n      reqParams = { ...reqParams, ...sortParams }\r\n      reqParams.page = 1\r\n      goodsList.value = []// 导致列表为空，加载更多组件顶上来，进入可视区，加载数据\r\n    }\r\n    // 2.更改 筛选组件 的筛选数据，重新请求\r\n    const fliterChange = (filterParams) => {\r\n      // console.log('选中的数据:', filterParams)\r\n      finished.value = false\r\n      // 合并请求参数，保留之前参数\r\n      reqParams = { ...reqParams, ...filterParams }\r\n      reqParams.page = 1\r\n      goodsList.value = []// 导致列表为空，加载更多组件顶上来，进入可视区，加载数据\r\n    }\r\n    return {\r\n      getDate,\r\n      loading,\r\n      finished,\r\n      goodsList,\r\n      sortChange,\r\n      fliterChange\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.goods-list {\r\n  background: #fff;\r\n  padding: 0 25px;\r\n  margin-top: 25px;\r\n  ul {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    padding: 0 5px;\r\n    li {\r\n      margin-right: 20px;\r\n      margin-bottom: 20px;\r\n      &:nth-child(5n) {\r\n        margin-right: 0;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>>\r\n","<template>\r\n  <!-- 筛选区 -->\r\n  <div class=\"sub-filter\" v-if=\"filterData && !filterLoading\">\r\n    <div class=\"item\">\r\n      <div class=\"head\">品牌：</div>\r\n      <div class=\"body\">\r\n        <a\r\n          @click=\"changeBrands(item.id)\"\r\n          :class=\"{ active: item.id === filterData.brands.selectedBrand }\"\r\n          href=\"javascript:;\"\r\n          v-for=\"item in filterData.brands\"\r\n          :key=\"item.id\"\r\n          >{{ item.name }}</a\r\n        >\r\n      </div>\r\n    </div>\r\n    <div class=\"item\" v-for=\"item in filterData.saleProperties\" :key=\"item.id\">\r\n      <div class=\"head\">{{ item.name }}：</div>\r\n      <div class=\"body\">\r\n        <a\r\n          @click=\"changeProp(item, prop.id)\"\r\n          :class=\"{ active: prop.id === item.selectedProp }\"\r\n          href=\"javascript:;\"\r\n          v-for=\"prop in item.properties\"\r\n          :key=\"prop.id\"\r\n          >{{ prop.name }}</a\r\n        >\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div v-else class=\"sub-filter\">\r\n    <XtxSkeleton class=\"item\" width=\"800px\" height=\"40px\" />\r\n    <XtxSkeleton class=\"item\" width=\"800px\" height=\"40px\" />\r\n    <XtxSkeleton class=\"item\" width=\"600px\" height=\"40px\" />\r\n    <XtxSkeleton class=\"item\" width=\"600px\" height=\"40px\" />\r\n    <XtxSkeleton class=\"item\" width=\"600px\" height=\"40px\" />\r\n  </div>\r\n</template>\r\n<script>\r\nimport { ref, watch } from 'vue'\r\nimport { findSubCategoryFilter } from '@/api/category'\r\nimport { useRoute } from 'vue-router'\r\nexport default {\r\n  name: 'SubFilter',\r\n  setup (props, { emit }) {\r\n    // 监听二级类目的id的变化获取筛选数据\r\n    const route = useRoute()\r\n    const filterData = ref(null)\r\n    // 加载状态\r\n    const filterLoading = ref(false)\r\n    // 监视二级类目的id变化\r\n    watch(() => route.params.id, (newVal) => {\r\n      // 变化后的id有值，而且处在二级类目路由下\r\n      if (newVal && `/category/sub/${newVal}` === route.path) {\r\n        // id变化，加载中\r\n        filterLoading.value = true\r\n        // 发请求获取数据\r\n        findSubCategoryFilter(route.params.id).then(data => {\r\n          console.log('筛选的数据：', data.result)\r\n          // 每一组可选的筛选条件缺失，全部条件，处理下数据+全部\r\n          // 给每一组数据+一个选中的ID\r\n          // 1.品牌  selectedBrand选中的品牌\r\n          data.result.brands.selectedBrand = null\r\n          data.result.brands.unshift({ id: null, name: '全部' })\r\n          // 2. 属性 selectedProp 选中的属性\r\n          data.result.saleProperties.forEach(item => {\r\n            item.selectedProp = null\r\n            item.properties.unshift({ id: null, name: '全部' })\r\n            // console.log('item', item)\r\n          })\r\n          // 设置修改的数据\r\n          filterData.value = data.result\r\n          // console.log('品牌：', filterData.value.brands)\r\n          // 获得数据，不加载（加载完成状态）\r\n          filterLoading.value = false\r\n        })\r\n      }\r\n    }, { immediate: true })\r\n\r\n    // 获取筛选参数的函数\r\n    const getFilterParams = () => {\r\n      const obj = { brandId: null, attrs: [] }\r\n      // 品牌\r\n      obj.brandId = filterData.value.brands.selectedBrand\r\n      // 销售属性\r\n      filterData.value.saleProperties.forEach(item => {\r\n        if (item.selectedProp) {\r\n          const prop = item.properties.find(prop => prop.id === item.selectedProp)\r\n          obj.attrs.push({ groupName: item.name, propertyName: prop.name })\r\n        }\r\n      })\r\n\r\n      // 参考数据:{brandId,attrs:[{groupName:'颜色',propertyName:'蓝色'},]}\r\n      // obj.attrs = null为空，就不会发attrs字段给后台\r\n      if (obj.attrs.length === 0) obj.attrs = null\r\n      return obj\r\n    }\r\n    // 1.记录当前选择的品牌\r\n    const changeBrands = (brandId) => {\r\n      if (filterData.value.brands.selectedBrand === brandId) return\r\n      filterData.value.brands.selectedBrand = brandId\r\n      emit('filter-change', getFilterParams())\r\n    }\r\n    // 2.记录当前选择的销售属性\r\n    const changeProp = (item, propId) => {\r\n      if (item.selectedProp === propId) return\r\n      item.selectedProp = propId\r\n      emit('filter-change', getFilterParams())\r\n    }\r\n    return {\r\n      filterData,\r\n      filterLoading,\r\n      changeBrands,\r\n      changeProp\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped lang='less'>\r\n// 筛选区\r\n.sub-filter {\r\n  background: #fff;\r\n  padding: 25px;\r\n  .item {\r\n    display: flex;\r\n    line-height: 40px;\r\n    .head {\r\n      width: 80px;\r\n      color: #999;\r\n    }\r\n    .body {\r\n      flex: 1;\r\n      a {\r\n        margin-right: 36px;\r\n        transition: all 0.3s;\r\n        display: inline-block;\r\n        &.active,\r\n        &:hover {\r\n          color: @xtxColor;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .xtx-skeleton {\r\n    padding: 10px 0;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./sub-filter.vue?vue&type=template&id=6592ec75&scoped=true\"\nimport script from \"./sub-filter.vue?vue&type=script&lang=js\"\nexport * from \"./sub-filter.vue?vue&type=script&lang=js\"\n\nimport \"./sub-filter.vue?vue&type=style&index=0&id=6592ec75&scoped=true&lang=less\"\n\nimport exportComponent from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\eribbit-client-pc\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6592ec75\"]])\n\nexport default __exports__","<template>\r\n  <XtxBread>\r\n    <XtxBreadItem to=\"/\">首页</XtxBreadItem>\r\n    <XtxBreadItem\r\n      :key=\"category.top.id\"\r\n      v-if=\"category.top\"\r\n      :to=\"`/category/${category.top.id}`\"\r\n      >{{ category.top.name }}</XtxBreadItem\r\n    >\r\n    <Transition name=\"fade-right\">\r\n      <XtxBreadItem :key=\"category.sub.id\" v-if=\"category.sub\">{{\r\n        category.sub.name\r\n      }}</XtxBreadItem>\r\n    </Transition>\r\n  </XtxBread>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from 'vue-demi'\r\nimport { useRoute } from 'vue-router'\r\nimport { useStore } from 'vuex'\r\nexport default {\r\n  name: 'SubBread',\r\n  setup () {\r\n    // 通过计算属性从vuex获取顶级和二级类目信息\r\n    // top:居家；sub：茶咖酒具\r\n    // 对象：{top:{id,name},sub:{id,name}}\r\n    const route = useRoute()\r\n    const store = useStore()\r\n    const category = computed(() => {\r\n      const cate = {}\r\n      // 完成获取数据逻辑\r\n      store.state.category.list.forEach(top => {\r\n        if (top.children) {\r\n          const sub = top.children.find(sub => sub.id === route.params.id)\r\n          if (sub) {\r\n            cate.top = { id: top.id, name: top.name }\r\n            cate.sub = { id: sub.id, name: sub.name }\r\n            // console.log('新数据：', cate)\r\n          }\r\n        }\r\n      })\r\n      return cate\r\n    })\r\n    return {\r\n      category\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n</style>\r\n","import { render } from \"./sub-bread.vue?vue&type=template&id=038900b9\"\nimport script from \"./sub-bread.vue?vue&type=script&lang=js\"\nexport * from \"./sub-bread.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\eribbit-client-pc\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"sub-sort\">\r\n    <div class=\"sort\">\r\n      <a\r\n        :class=\"{ active: sortParams.sortField === null }\"\r\n        @click=\"changeSort(null)\"\r\n        href=\"javascript:;\"\r\n        >默认排序</a\r\n      >\r\n      <a\r\n        :class=\"{ active: sortParams.sortField === 'publishTime' }\"\r\n        @click=\"changeSort('publishTime')\"\r\n        href=\"javascript:;\"\r\n        >最新商品</a\r\n      >\r\n      <a\r\n        :class=\"{ active: sortParams.sortField === 'orderNum' }\"\r\n        @click=\"changeSort('orderNum')\"\r\n        href=\"javascript:;\"\r\n        >最高人气</a\r\n      >\r\n      <a\r\n        :class=\"{ active: sortParams.sortField === 'evaluateNum' }\"\r\n        @click=\"changeSort('evaluateNum')\"\r\n        href=\"javascript:;\"\r\n        >评论最多</a\r\n      >\r\n      <a @click=\"changeSort('price')\" href=\"javascript:;\">\r\n        价格排序\r\n        <i\r\n          :class=\"{\r\n            active:\r\n              sortParams.sortField === 'price' &&\r\n              sortParams.sortMethod === 'asc',\r\n          }\"\r\n          class=\"arrow up\"\r\n        />\r\n        <i\r\n          :class=\"{\r\n            active:\r\n              sortParams.sortField === 'price' &&\r\n              sortParams.sortMethod === 'desc',\r\n          }\"\r\n          class=\"arrow down\"\r\n        />\r\n      </a>\r\n    </div>\r\n    <div class=\"check\">\r\n      <XtxCheckbox @change=\"changeCheck\" v-model=\"sortParams.inventory\"\r\n        >仅显示有货商品</XtxCheckbox\r\n      >\r\n      <XtxCheckbox @change=\"changeCheck\" v-model=\"sortParams.onlyDiscount\"\r\n        >仅显示特惠商品</XtxCheckbox\r\n      >\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { reactive } from 'vue'\r\nexport default {\r\n  name: 'SubSort',\r\n  setup (props, { emit }) {\r\n    // 实现交互（实现交互的数据和后台保持一致）\r\n    // 1.明确交换数据\r\n    const sortParams = reactive({\r\n      inventory: false, // 是否有库存\r\n      onlyDiscount: false, // 只显示特惠\r\n      sortField: null, // 排序字段（根据什么排序）\r\n      sortMethod: null// 排序规则（升降序）\r\n    })\r\n    // 2.提供模板使用\r\n    // 3.绑定按钮的点击事件修改排序字段和排序方式\r\n    const changeSort = (sortField) => {\r\n      if (sortField === 'price') {\r\n        sortParams.sortField = sortField\r\n        // 处理排序\r\n        if (sortParams.sortMethod === null) {\r\n          sortParams.sortMethod = 'desc'\r\n        } else {\r\n          sortParams.sortMethod = sortParams.sortMethod === 'desc' ? 'asc' : 'desc'\r\n        }\r\n      } else {\r\n        // 如果已经选项阻止运行\r\n        if (sortParams.sortField === sortField) return\r\n        sortParams.sortField = sortField\r\n        sortParams.sortMethod = null\r\n      }\r\n      // 触发sort-change事件\r\n      emit('sort-change', sortParams)\r\n    }\r\n    // 复选框选择事件\r\n    const changeCheck = () => {\r\n      // 触发sort-change事件\r\n      emit('sort-change', sortParams)\r\n    }\r\n    return {\r\n      sortParams,\r\n      changeSort,\r\n      changeCheck\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped lang='less'>\r\n.sub-sort {\r\n  height: 80px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  .sort {\r\n    display: flex;\r\n    a {\r\n      height: 30px;\r\n      line-height: 28px;\r\n      border: 1px solid #e4e4e4;\r\n      padding: 0 20px;\r\n      margin-right: 20px;\r\n      color: #999;\r\n      border-radius: 2px;\r\n      position: relative;\r\n      transition: all 0.3s;\r\n      &.active {\r\n        background: @xtxColor;\r\n        border-color: @xtxColor;\r\n        color: #fff;\r\n      }\r\n      .arrow {\r\n        position: absolute;\r\n        border: 5px solid transparent;\r\n        right: 8px;\r\n        &.up {\r\n          top: 3px;\r\n          border-bottom-color: #bbb;\r\n          &.active {\r\n            border-bottom-color: @xtxColor;\r\n          }\r\n        }\r\n        &.down {\r\n          top: 15px;\r\n          border-top-color: #bbb;\r\n          &.active {\r\n            border-top-color: @xtxColor;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .check {\r\n    .xtx-checkbox {\r\n      margin-left: 20px;\r\n      color: #999;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./sub-sort.vue?vue&type=template&id=013b5020&scoped=true\"\nimport script from \"./sub-sort.vue?vue&type=script&lang=js\"\nexport * from \"./sub-sort.vue?vue&type=script&lang=js\"\n\nimport \"./sub-sort.vue?vue&type=style&index=0&id=013b5020&scoped=true&lang=less\"\n\nimport exportComponent from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\eribbit-client-pc\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-013b5020\"]])\n\nexport default __exports__","import { render } from \"./sub.vue?vue&type=template&id=765bd491&scoped=true\"\nimport script from \"./sub.vue?vue&type=script&lang=js\"\nexport * from \"./sub.vue?vue&type=script&lang=js\"\n\nimport \"./sub.vue?vue&type=style&index=0&id=765bd491&lang=less&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\eribbit-client-pc\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-765bd491\"]])\n\nexport default __exports__"],"names":["class","_createBlock","_component_RouterLink","to","$props","id","_createElementVNode","src","picture","alt","_hoisted_2","name","_hoisted_3","desc","_hoisted_4","price","props","goods","type","Object","default","__exports__","render","_createElementBlock","_hoisted_1","_createVNode","_component_SubBread","_component_SubFilter","onFilterChange","$setup","_component_SubSort","onSortChange","_Fragment","key","_component_GoodsItem","_component_XtxInfiniteLoading","loading","finished","onInfinite","brands","item","onClick","active","selectedBrand","href","saleProperties","_hoisted_6","_hoisted_7","properties","prop","selectedProp","_hoisted_9","_component_XtxSkeleton","width","height","setup","emit","route","useRoute","filterData","ref","filterLoading","watch","params","newVal","path","value","findSubCategoryFilter","then","data","console","log","result","unshift","forEach","immediate","getFilterParams","obj","brandId","attrs","find","push","groupName","propertyName","length","changeBrands","changeProp","propId","_component_XtxBread","_component_XtxBreadItem","top","_Transition","sub","store","useStore","category","computed","cate","state","list","children","sortField","sortMethod","_component_XtxCheckbox","onChange","inventory","onlyDiscount","sortParams","reactive","changeSort","changeCheck","components","SubBread","SubFilter","SubSort","GoodsItem","goodsList","reqParams","page","pageSize","getDate","categoryId","findSubCategoryGoods","items","newValue","sortChange","fliterChange","filterParams"],"sourceRoot":""}